sudo: required
dist: trusty
language: node_js
node_js:
- stable
branches:
  except:
  - gh-pages
addons:
  firefox: latest
  apt:
    sources:
    - google-chrome
    packages:
    - google-chrome-stable
before_script:
- npm install web-component-tester
- npm install bower
- export PATH=$PWD/node_modules/.bin:$PATH
- bower install
script:
- xvfb-run wct --skip-plugin sauce
- if [ "${TRAVIS_PULL_REQUEST}" = "false" ]; then wct --plugin sauce --skip-plugin
  local; fi
after_success:
- if [ "${TRAVIS_PULL_REQUEST}" = "false" ]; then openssl aes-256-cbc -k "$DEPLOYSECRET"
  -in deploy.enc -out deploy_key -d; fi
- cd $TRAVIS_BUILD_DIR/scripts
- chmod 755 ghp.sh
- "./ghp.sh"
env:
  global:
  - secure: WizpPyPZ2DbRgClxCr4/mg+ARhQa5TEoqfqbl8xt0MWvdReDdCmfTRzvbbNqMZPx97qoyuneoin7aleuUH53Y1T9jFoy7ywz/RM/oYWcYPqnfejaUBcQqDe3uO0bm06krimOE9KD6GvXc+yQQw/K2h06YQ1fM52jfYKUjRC4fusQPNR2L19z2GYiYAwErqLgNhTJUuH68TV4rI7WiVVayoshEwdDsagmqvO6A+Gu9ZUWTJzI1qHr98yFjw3+Fl0X7NCt90vNCfJhZDaj02JY+9VFL4jQEDWp+KbjETjVZVh/crLGnDPxIaBozRlHydGxlsoCy24SHAssltILxmM3rOzhcweqhecs6LbuzaRTLoysuKytEeuDbZ/9m1OmLkHvWXBEuKPFbkXF0kOc7+/EvRkvL258d3sm6pigNTvmB5ZymFycyHPSRyOQw+n65cTx22xsfuhJIMRx3pOY0iZ33tF3E03miShyANlvzuJGV5MHSA5ShcKen3GqC8QyL0QZt1BXjxQ03o7E/Sb/iCizlFFsa73UH2k9TTcMjTwVjH8BA0mUcDsuKihNhk6Vl5pJC/b0Q1iC/RZoUDdUUDzYogoVImC/FbmFc4ygrkVDrOXOIODbPKAgoLzNuz5PZLHdxpMug7XBHERp+n4TAC/fHygMYn/v0ip8TSYszYOVtqA=
  - secure: d8c+O7ChEVJTBd54TaSdYZJ3h64idJ6amtRiBLHgCq8XBhZQyqSf8xYY/iTtEG94gJP3ttG7YsAnHg6WaENGRnHPzXcYP7WvIww/vxEaTsUMCF5Z2LBWSUl61aBC6AIgpZ4Skuq29YQbQomNI7uT0LAlBmG1OJNJzM9G2LYq9U+I3Jcoiug+lUO7OLIlwesKJspj90WiYgVmGKtLV55/Y/zerMcA4ik3qbC9sGvDtoPVHzygjm8nphSJs5ZfGAWfuU6qUwwcxZUYHbopTFduO98zf0fkQTUdSVkcRsE9nJnh1u7V1QRVjWi15iQpinzbcIUISwliK/435wdB+p3cH7ku3voYnrvL/IZ0HBko0GxuXEHgy6+VF9UqFDFqvRE/DPmD17jcj4M5okkZsuLI349f+z/hXSWiHFs5hxWYHUcDDeY6FpyrhjVQeuLdDQCXwZImHyA0N8ki1CyEN9cgNCeBjbrjRFsRznhKZC7w95dziHTqrT72X8k7YNLo1/k6gQlhrOgly/bLraDZRFaAQ2pc6bm4Sqb7JOt2B8blE/aXi2h2uK7103mWGIkW/+KLkrN4/DR9r4pSInnUuT88YpN7UGkHq783F2ElaAh8ZKSYbbdEJhDXVWfjtj74YhfjKlSfBe9JF20X2QwGXoRdhZx3gtsadgZr/FUCgPUk4Y4=
